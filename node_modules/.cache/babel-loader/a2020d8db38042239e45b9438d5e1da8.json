{"ast":null,"code":"import React from 'react';\nimport { takeEvery, call, put, select, flush, delay } from \"redux-saga/effects\";\nimport { coinApi } from \"../Api/api\";\nimport { createConnectSocketSaga, createRequestSaga, requestActions } from '../Lib/asyncUtil';\nimport { coinListDataUtils, coinReadDataUtils } from '../Lib/utils';\nconst START_INIT = \"START_INIT\";\nconst START_INIT_ASYNC = \"START_INIT_ASYNC\";\nconst GET_MARKET_NAMES = \"GET_MARKET_NAMES\";\nconst GET_MARKET_NAMES_SUCCESS = \"GET_MARKET_NAMES_SUCCESS\";\nconst GET_MARKET_NAMES_ERROR = \"GET_MARKET_NAMES_ERROR\";\nconst GET_UPBIT_MARKET_NAMES = \"GET_UPBIT_MARKET_NAMES\";\nconst GET_UPBIT_MARKET_NAMES_SUCCESS = \"GET_UPBIT_MARKET_NAMES_SUCCESS\";\nconst GET_UPBIT_MARKET_NAMES_ERROR = \"GET_UPBIT_MARKET_NAMES_ERROR\";\nconst CONNECT_UPBIT_SOCKET = \"CONNECT_UPBIT_SOCKET\";\nconst CONNECT_UPBIT_SOCKET_SUCCESS = \"CONNECT_UPBIT_SOCKET_SUCCESS\";\nconst CONNECT_UPBIT_SOCKET_ERROR = \"CONNECT_UPBIT_SOCKET_ERROR\";\n\nconst startInitAsync = () => ({\n  type: START_INIT_ASYNC\n});\n\nconst startInit = () => ({\n  type: START_INIT\n});\n\nconst getMarketNameSaga = createRequestSaga(GET_MARKET_NAMES, coinApi.getMarketCodes, coinListDataUtils.marketNames);\nconst getUpbitAllMarketNameSaga = createRequestSaga(GET_UPBIT_MARKET_NAMES, coinApi.getMarketCodes, coinListDataUtils.upbitAllNames);\nconst connectUpbitSocketSaga = createConnectSocketSaga(CONNECT_UPBIT_SOCKET, \"ticker\", coinReadDataUtils.marketNames);\n\nfunction* startInitSaga() {\n  yield getMarketNameSaga();\n  yield getUpbitAllMarketNameSaga();\n  const state = yield select();\n  const marketNames = Object.keys(state.Coin.upbitTotalNames.data);\n  yield connectUpbitSocketSaga({\n    payload: marketNames\n  }); //console.log(state.Coin.marketNames.data['ADA'].upbitSym);\n}\n\nfunction* coinSaga() {\n  yield takeEvery(START_INIT, startInitSaga);\n}\n\nconst initialState = {\n  upbitTotalNames: {\n    data: {\n      \"KRW-BTC\": \"\"\n    }\n  },\n  marketNames: {\n    error: false,\n    data: {\n      \"BTC\": {\n        upbitUSDT: \"\",\n        upbitBTC: \"\",\n        upbitSym: \"\",\n        bithumbSym: \"\",\n        binanSym: \"\",\n        upbitPrice: 0.0,\n        upbitBTCPrice: 0.0,\n        upbitPrice: 0.0,\n        bithumbPrice: 0.0,\n        binanPrice: 0.0\n      }\n    }\n  }\n};\n\nconst coinReducer = (state = initialState, action) => {\n  //console.log(state);\n  switch (action.type) {\n    case GET_MARKET_NAMES_SUCCESS:\n    case GET_MARKET_NAMES_ERROR:\n      return requestActions(GET_MARKET_NAMES, \"marketNames\")(state, action);\n\n    case GET_UPBIT_MARKET_NAMES_SUCCESS:\n    case GET_UPBIT_MARKET_NAMES_ERROR:\n      return requestActions(GET_UPBIT_MARKET_NAMES, \"upbitTotalNames\")(state, action);\n\n    case CONNECT_UPBIT_SOCKET_SUCCESS:\n    case CONNECT_UPBIT_SOCKET_ERROR:\n      return requestActions(CONNECT_UPBIT_SOCKET, \"marketNames\")(state, action);\n\n    case START_INIT:\n      //console.log(12);\n      return state + 1;\n\n    default:\n      return state;\n  }\n};\n\nexport { coinReducer, coinSaga, startInit, getMarketNameSaga, connectUpbitSocketSaga, startInitAsync };","map":{"version":3,"sources":["/Users/sinhyeonsu/Documents/coingetprice2/src/Reducer/coinReducer.js"],"names":["React","takeEvery","call","put","select","flush","delay","coinApi","createConnectSocketSaga","createRequestSaga","requestActions","coinListDataUtils","coinReadDataUtils","START_INIT","START_INIT_ASYNC","GET_MARKET_NAMES","GET_MARKET_NAMES_SUCCESS","GET_MARKET_NAMES_ERROR","GET_UPBIT_MARKET_NAMES","GET_UPBIT_MARKET_NAMES_SUCCESS","GET_UPBIT_MARKET_NAMES_ERROR","CONNECT_UPBIT_SOCKET","CONNECT_UPBIT_SOCKET_SUCCESS","CONNECT_UPBIT_SOCKET_ERROR","startInitAsync","type","startInit","getMarketNameSaga","getMarketCodes","marketNames","getUpbitAllMarketNameSaga","upbitAllNames","connectUpbitSocketSaga","startInitSaga","state","Object","keys","Coin","upbitTotalNames","data","payload","coinSaga","initialState","error","upbitUSDT","upbitBTC","upbitSym","bithumbSym","binanSym","upbitPrice","upbitBTCPrice","bithumbPrice","binanPrice","coinReducer","action"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport { takeEvery, call, put, select, flush, delay } from \"redux-saga/effects\";\nimport { coinApi } from \"../Api/api\";\nimport { createConnectSocketSaga, createRequestSaga, requestActions } from '../Lib/asyncUtil';\nimport { coinListDataUtils, coinReadDataUtils } from '../Lib/utils';\n\nconst START_INIT = \"START_INIT\";\nconst START_INIT_ASYNC = \"START_INIT_ASYNC\";\nconst GET_MARKET_NAMES = \"GET_MARKET_NAMES\";\nconst GET_MARKET_NAMES_SUCCESS = \"GET_MARKET_NAMES_SUCCESS\";\nconst GET_MARKET_NAMES_ERROR = \"GET_MARKET_NAMES_ERROR\";\n\nconst GET_UPBIT_MARKET_NAMES = \"GET_UPBIT_MARKET_NAMES\";\nconst GET_UPBIT_MARKET_NAMES_SUCCESS = \"GET_UPBIT_MARKET_NAMES_SUCCESS\";\nconst GET_UPBIT_MARKET_NAMES_ERROR = \"GET_UPBIT_MARKET_NAMES_ERROR\";\n\nconst CONNECT_UPBIT_SOCKET = \"CONNECT_UPBIT_SOCKET\";\nconst CONNECT_UPBIT_SOCKET_SUCCESS = \"CONNECT_UPBIT_SOCKET_SUCCESS\";\nconst CONNECT_UPBIT_SOCKET_ERROR = \"CONNECT_UPBIT_SOCKET_ERROR\";\n\nconst startInitAsync = () => ({ type: START_INIT_ASYNC });\nconst startInit = () => ({ type: START_INIT });\n\n\nconst getMarketNameSaga = createRequestSaga(\n    GET_MARKET_NAMES,\n    coinApi.getMarketCodes,\n    coinListDataUtils.marketNames\n);\nconst getUpbitAllMarketNameSaga = createRequestSaga(\n    GET_UPBIT_MARKET_NAMES,\n    coinApi.getMarketCodes,\n    coinListDataUtils.upbitAllNames\n);\n\n\n\nconst connectUpbitSocketSaga = createConnectSocketSaga(\n    CONNECT_UPBIT_SOCKET,\n    \"ticker\",\n    coinReadDataUtils.marketNames\n);\n\n\nfunction* startInitSaga() {\n    yield getMarketNameSaga();\n    yield getUpbitAllMarketNameSaga();\n\n    const state = yield select();\n    const marketNames = Object.keys(state.Coin.upbitTotalNames.data);\n\n    yield connectUpbitSocketSaga({ payload: marketNames });\n\n    //console.log(state.Coin.marketNames.data['ADA'].upbitSym);\n}\nfunction* coinSaga() {\n    yield takeEvery(START_INIT, startInitSaga);\n}\n\nconst initialState = {\n    upbitTotalNames: {\n        data: {\n            \"KRW-BTC\": \"\"\n        },\n    },\n    marketNames: {\n        error: false,\n        data: {\n            \"BTC\": {\n                upbitUSDT: \"\", upbitBTC: \"\", upbitSym: \"\", bithumbSym: \"\", binanSym: \"\", upbitPrice: 0.0, upbitBTCPrice: 0.0, upbitPrice: 0.0, bithumbPrice: 0.0, binanPrice: 0.0\n            },\n        },\n    },\n};\n\nconst coinReducer = (state = initialState, action) => {\n    //console.log(state);\n    switch (action.type) {\n        case GET_MARKET_NAMES_SUCCESS:\n        case GET_MARKET_NAMES_ERROR:\n            return requestActions(GET_MARKET_NAMES, \"marketNames\")(state, action);\n\n        case GET_UPBIT_MARKET_NAMES_SUCCESS:\n        case GET_UPBIT_MARKET_NAMES_ERROR:\n            return requestActions(GET_UPBIT_MARKET_NAMES, \"upbitTotalNames\")(state, action);\n\n        case CONNECT_UPBIT_SOCKET_SUCCESS:\n        case CONNECT_UPBIT_SOCKET_ERROR:\n            return requestActions(CONNECT_UPBIT_SOCKET, \"marketNames\")(state, action);\n\n        case START_INIT:\n            //console.log(12);\n            return state + 1;\n        default:\n            return state;\n    }\n}\nexport {\n    coinReducer,\n    coinSaga,\n    startInit,\n    getMarketNameSaga,\n    connectUpbitSocketSaga,\n    startInitAsync\n}"]},"metadata":{},"sourceType":"module"}