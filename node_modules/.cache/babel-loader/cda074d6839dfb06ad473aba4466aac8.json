{"ast":null,"code":"import { call, put, select, flush, delay } from \"redux-saga/effects\";\nimport { coinApi } from \"../Api/api\";\n\nconst createRequestSaga = (type, api, dataMaker) => {\n  const SUCCESS = `${type}_SUCCESS`;\n  const ERROR = `${type}_ERROR`;\n  return function* (action = {}) {\n    const post = yield call(coinApi.getMarketCodes, action.payload);\n    console.log(post);\n\n    try {\n      //const res = yield call(api, action.payload);\n      //onst state = yield select();\n      //console.log(action.payload);\n      yield put({\n        type: SUCCESS,\n        payload: dataMaker(res.data, state)\n      }); // yield put(finishLoading(type));\n    } catch (e) {\n      //yield put({ type: ERROR, payload: e });\n      // yield put(finishLoading(type));\n      throw e;\n    }\n  };\n};\n\nconst requestActions = (type, key) => {\n  const [SUCCESS, ERROR] = [`${type}_SUCCESS`, `${type}_ERROR`];\n  return (state, action) => {\n    switch (action.type) {\n      case SUCCESS:\n        return reducerUtils.success(state, action.payload, key);\n\n      case ERROR:\n        return reducerUtils.error(state, action.payload, key);\n\n      default:\n        return state;\n    }\n  };\n};\n\nconst reducerUtils = {\n  success: (state, payload, key) => {\n    return { ...state,\n      [key]: {\n        data: payload,\n        error: false\n      }\n    };\n  },\n  error: (state, error, key) => ({ ...state,\n    [key]: { ...state[key],\n      error: error\n    }\n  })\n};\nexport { createRequestSaga, requestActions };","map":{"version":3,"sources":["/Users/sinhyeonsu/Documents/coingetprice2/src/Lib/asyncUtil.js"],"names":["call","put","select","flush","delay","coinApi","createRequestSaga","type","api","dataMaker","SUCCESS","ERROR","action","post","getMarketCodes","payload","console","log","res","data","state","e","requestActions","key","reducerUtils","success","error"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,EAAoBC,MAApB,EAA4BC,KAA5B,EAAmCC,KAAnC,QAAgD,oBAAhD;AACA,SAASC,OAAT,QAAwB,YAAxB;;AAGA,MAAMC,iBAAiB,GAAG,CAACC,IAAD,EAAOC,GAAP,EAAYC,SAAZ,KAA0B;AAChD,QAAMC,OAAO,GAAI,GAAEH,IAAK,UAAxB;AACA,QAAMI,KAAK,GAAI,GAAEJ,IAAK,QAAtB;AAEA,SAAO,WAAWK,MAAM,GAAG,EAApB,EAAwB;AAC3B,UAAMC,IAAI,GAAG,MAAMb,IAAI,CAACK,OAAO,CAACS,cAAT,EAAyBF,MAAM,CAACG,OAAhC,CAAvB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;;AACA,QAAI;AACA;AACA;AACA;AACA,YAAMZ,GAAG,CAAC;AAAEM,QAAAA,IAAI,EAAEG,OAAR;AAAiBK,QAAAA,OAAO,EAAEN,SAAS,CAACS,GAAG,CAACC,IAAL,EAAWC,KAAX;AAAnC,OAAD,CAAT,CAJA,CAKA;AACH,KAND,CAME,OAAOC,CAAP,EAAU;AACR;AACA;AACA,YAAMA,CAAN;AACH;AACJ,GAdD;AAeH,CAnBD;;AAqBA,MAAMC,cAAc,GAAG,CAACf,IAAD,EAAOgB,GAAP,KAAe;AAClC,QAAM,CAACb,OAAD,EAAUC,KAAV,IAAmB,CAAE,GAAEJ,IAAK,UAAT,EAAqB,GAAEA,IAAK,QAA5B,CAAzB;AACA,SAAO,CAACa,KAAD,EAAQR,MAAR,KAAmB;AACtB,YAAQA,MAAM,CAACL,IAAf;AACI,WAAKG,OAAL;AACI,eAAOc,YAAY,CAACC,OAAb,CAAqBL,KAArB,EAA4BR,MAAM,CAACG,OAAnC,EAA4CQ,GAA5C,CAAP;;AACJ,WAAKZ,KAAL;AACI,eAAOa,YAAY,CAACE,KAAb,CAAmBN,KAAnB,EAA0BR,MAAM,CAACG,OAAjC,EAA0CQ,GAA1C,CAAP;;AACJ;AACI,eAAOH,KAAP;AANR;AAQH,GATD;AAUH,CAZD;;AAeA,MAAMI,YAAY,GAAG;AACjBC,EAAAA,OAAO,EAAE,CAACL,KAAD,EAAQL,OAAR,EAAiBQ,GAAjB,KAAyB;AAC9B,WAAO,EACH,GAAGH,KADA;AAEH,OAACG,GAAD,GAAO;AACHJ,QAAAA,IAAI,EAAEJ,OADH;AAEHW,QAAAA,KAAK,EAAE;AAFJ;AAFJ,KAAP;AAOH,GATgB;AAUjBA,EAAAA,KAAK,EAAE,CAACN,KAAD,EAAQM,KAAR,EAAeH,GAAf,MAAwB,EAC3B,GAAGH,KADwB;AAE3B,KAACG,GAAD,GAAO,EACH,GAAGH,KAAK,CAACG,GAAD,CADL;AAEHG,MAAAA,KAAK,EAAEA;AAFJ;AAFoB,GAAxB;AAVU,CAArB;AAqBA,SACIpB,iBADJ,EAEIgB,cAFJ","sourcesContent":["import { call, put, select, flush, delay } from \"redux-saga/effects\";\nimport { coinApi } from \"../Api/api\";\n\n\nconst createRequestSaga = (type, api, dataMaker) => {\n    const SUCCESS = `${type}_SUCCESS`;\n    const ERROR = `${type}_ERROR`;\n\n    return function* (action = {}) {\n        const post = yield call(coinApi.getMarketCodes, action.payload);\n        console.log(post);\n        try {\n            //const res = yield call(api, action.payload);\n            //onst state = yield select();\n            //console.log(action.payload);\n            yield put({ type: SUCCESS, payload: dataMaker(res.data, state) });\n            // yield put(finishLoading(type));\n        } catch (e) {\n            //yield put({ type: ERROR, payload: e });\n            // yield put(finishLoading(type));\n            throw e;\n        }\n    };\n};\n\nconst requestActions = (type, key) => {\n    const [SUCCESS, ERROR] = [`${type}_SUCCESS`, `${type}_ERROR`];\n    return (state, action) => {\n        switch (action.type) {\n            case SUCCESS:\n                return reducerUtils.success(state, action.payload, key);\n            case ERROR:\n                return reducerUtils.error(state, action.payload, key);\n            default:\n                return state;\n        }\n    };\n};\n\n\nconst reducerUtils = {\n    success: (state, payload, key) => {\n        return {\n            ...state,\n            [key]: {\n                data: payload,\n                error: false,\n            },\n        };\n    },\n    error: (state, error, key) => ({\n        ...state,\n        [key]: {\n            ...state[key],\n            error: error,\n        },\n    }),\n};\n\n\n\nexport {\n    createRequestSaga,\n    requestActions,\n}"]},"metadata":{},"sourceType":"module"}